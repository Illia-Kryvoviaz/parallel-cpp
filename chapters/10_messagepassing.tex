\chapter{Message passing}
\label{ch:datastructures}

In Section \ref{sec:atomiccpp23}, we have seen an example of a simple event-driven architecture:

\raggedbottom
\begin{codebox}[]{\href{https://godbolt.org/z/r8oG3nGsz}{\ExternalLink}}
\footnotesize An example of the use of coroutines in message-passing architectures (1/3).
\tcblower
\cppfile{code_examples/cpp23/coroutines5a.h}
\end{codebox}

\raggedbottom
\begin{codebox}[]{\href{https://godbolt.org/z/3K9f39461}{\ExternalLink}}
\footnotesize An example of the use of coroutines in message-passing architectures (2/3)
\tcblower
\cppfile{code_examples/cpp23/coroutines5b.h}
\end{codebox}

\raggedbottom
\begin{codebox}[]{\href{https://godbolt.org/z/vT7EMfKPh}{\ExternalLink}}
\footnotesize An example of the use of coroutines in message-passing architectures (3/3)
\tcblower
\cppfile{code_examples/cpp23/coroutines5.cpp}
\end{codebox}

Eventually, in C++23 and C++26, the support for message-passing architectures based on \url{https://github.com/lewissbaker/cppcoro} should be available, but let us try to extend this to MQTT client and server. (See \url{https://github.com/X-Ryl669/eMQTT5 for the details of the protocol.)